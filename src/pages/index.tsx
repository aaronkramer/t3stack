import type { NextPage } from "next";
import Head from "next/head";
import { useEffect, useRef, useState } from "react";
import { trpc } from "../utils/trpc";
import { v4 as uuidv4 } from 'uuid';
import styles from './index.module.css'

import { TreeSelect } from 'primereact/treeselect';
import { Button } from 'primereact/button';

import { InputTextarea } from 'primereact/inputtextarea';

import Navbar from "../components/NavBar";

const Home: NextPage = () => {
  // const [taskText, setTaskText] = useState('')
  const [value, setValue] = useState('');

  const pressedKeys: string[] = []

  const handleInputKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
    if (!pressedKeys.includes(event.key)) { pressedKeys.push(event.key) }
    if (pressedKeys.includes('Enter') && pressedKeys.includes('Shift')) { }
    else if (pressedKeys.includes('Enter')) {
      // todoMap.set(uuidv4(), { text: taskText })
      // setItems(todoMap)
      setTaskText('')
      if (!pressedKeys.includes('Control')) {
        event.currentTarget.blur()
        pressedKeys.length = 0
      }
    } else if (pressedKeys.includes('Escape')) {
      setTaskText('')
      event.currentTarget.blur()
      pressedKeys.length = 0
    }
  }
  const handleSubmit = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {
    self.alert(value)
    console.log(value)
  }


  return (
    <>
      <Head>
        <title>Aaron's Checklist</title>
        <meta name="description" content="Generated by create-t3-app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div className='grid place-items-center'>

      <Navbar />

      <div className='grid place-items-center w-[70%]'>
        <h1 className="">
          Todo List
        </h1>
        <div className='w-[100%]' /*'w-[100%] flex flex-row justify-between'*/>
        <InputTextarea className='top-1' value={value} onChange={(e) => setValue(e.target.value)} onKeyDown={(e) => handleInputKeyDown(e)} rows={1} cols={55} autoResize />
        <Button className='top-0' onClick={(e) => handleSubmit(e)} >Press Me!</Button>
        </div>
      </div>
      </div>
    </>
  );
};

export default Home;
